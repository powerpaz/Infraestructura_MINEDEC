:root{
  --bg:#0b0f19;
  --card:#121826;
  --muted:#9aa4b2;
  --text:#e6edf7;
  --accent:#4cc9f0;
  --accent2:#b5179e;
  --accent3:#f77f00;
  --accent4:#43aa8b;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body,#app,#map{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial}

#app{display:grid;grid-template-columns: 360px 1fr}

#panel{
  background:linear-gradient(180deg,#0b0f19 0%, #0b0f19e6 100%);
  border-right:1px solid #1a2234;
  padding:20px 16px;
  overflow:auto;
}

.brand{display:flex; gap:12px; align-items:center; margin-bottom:12px}
.brand i{font-size:28px;color:var(--accent)}
.brand h1{margin:0;font-size:18px}
.brand p{margin:0;color:var(--muted);font-size:12px}

.filters h2{margin:16px 0 8px 0; font-size:14px; color:#cbd5e1; letter-spacing:.3px}

.switch{
  display:grid; grid-template-columns: 28px 1fr; gap:12px;
  align-items:center; background:var(--card); border:1px solid #1a2234;
  border-radius:14px; padding:10px 12px; margin:8px 0; box-shadow:var(--shadow);
}
.switch input{appearance:none;width:0;height:0;position:absolute}
.switch span{
  width:14px;height:14px;border-radius:50%;
  box-shadow:0 0 0 4px color-mix(in oklab, var(--dot) 25%, transparent);
  background:var(--dot);
}
.switch strong{display:block}
.switch small{color:var(--muted)}

.source{margin:14px 0 6px 0; background:#0f1624; border:1px dashed #283148; border-radius:12px; padding:10px 12px}
.source code{background:#0b1322; padding:1px 6px; border-radius:8px; color:#a5b4fc}
#reload{margin-top:8px;width:100%; background:#142036; color:#e2e8f0; border:1px solid #2a3655; border-radius:10px; padding:8px 10px; cursor:pointer}
#reload:hover{background:#192744}

.legend{margin-top:10px; background:#0f1624; border:1px solid #1a2234; border-radius:12px; padding:10px 12px}
.legend ul{list-style:none;padding:0;margin:6px 0;display:grid;gap:6px}
.legend .dot{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;background:var(--c); box-shadow:0 0 0 4px color-mix(in oklab, var(--c) 20%, transparent)}
.legend .hint{color:#9aa4b2; font-size:12px}

footer{margin-top:16px;color:#7f8ea3}

#map{position:relative;}

/* Botón hamburguesa móvil */
.menu-btn{
  position:absolute; top:12px; left:12px; z-index:1000;
  background:#121a2a; color:#e6edf7; border:1px solid #2a3655;
  padding:8px 10px; border-radius:10px; cursor:pointer; box-shadow:var(--shadow);
  display:none;
}
.menu-btn:hover{background:#17223a}

/* Popups oscuros */
.leaflet-popup-content-wrapper,.leaflet-popup-tip{
  background:#0f1624;color:#e6edf7;border:1px solid #283148;border-radius:12px;
}
.leaflet-popup-content{margin:8px 10px}
.popup h4{margin:.2rem 0 .4rem 0;font-size:15px}
.popup table{border-collapse:collapse;font-size:12px}
.popup td{padding:2px 6px;border-bottom:1px solid #23314a;color:#cbd5e1}
.popup td.k{color:#8aa0b6}

/* Cluster estilos por tipo */
.marker-cluster-small, .marker-cluster-medium, .marker-cluster-large{
  background:rgba(20,31,51,.9);
  border:1px solid #2a3655;
  color:#e6edf7;
}
.cluster--tabla1 div{background: radial-gradient(circle, #4cc9f0 0%, #142036 70%)}
.cluster--tabla2 div{background: radial-gradient(circle, #b5179e 0%, #2a0f2a 70%)}
.cluster--tabla3 div{background: radial-gradient(circle, #f77f00 0%, #2a1c0f 70%)}
.cluster--tabla4 div{background: radial-gradient(circle, #43aa8b 0%, #12322a 70%)}

/* Punto circular */
.point{
  width:10px;height:10px;border-radius:50%;
  border:1px solid rgba(255,255,255,.25);
  box-shadow:0 0 0 4px rgba(76,201,240,.15);
  background:#4cc9f0;
}

/* ===== Responsive ===== */
@media (max-width: 900px){
  #app{grid-template-columns: 1fr}
  #panel{
    position:absolute; inset:0 auto 0 0; width:min(88vw,380px);
    transform: translateX(-100%);
    transition: transform .25s ease;
    z-index:1200;
  }
  body.drawer-open #panel{ transform: translateX(0) }
  .menu-btn{ display:inline-flex; align-items:center; gap:6px }
}
